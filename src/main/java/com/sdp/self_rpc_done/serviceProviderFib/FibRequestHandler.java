package com.sdp.self_rpc_done.serviceProviderFib;import com.sdp.self_rpc_done.protoEntity.request;import com.sdp.self_rpc_done.protoEntity.response;import com.sdp.self_rpc_done.publicInterface.IMessageHandler;import com.sdp.self_rpc_done.publicInterface.MessageOutput;import com.sdp.self_rpc_done.publicInterface.SelfRequest;import com.sdp.self_rpc_done.publicInterface.SelfResponse;import io.netty.channel.ChannelHandlerContext;import java.util.ArrayList;import java.util.List;public class FibRequestHandler implements IMessageHandler<request.SelfReq> {    private List<Long> fibs = new ArrayList<>();    {        fibs.add(1L); // fib(0) = 1        fibs.add(1L); // fib(1) = 1    }    @Override    public void handle(ChannelHandlerContext ctx, String requestId, request.SelfReq msg) {        int n = msg.getBase();        for (int i = fibs.size(); i < n + 1; i++) {            long value = fibs.get(i - 2) + fibs.get(i - 1);            fibs.add(value);        }        // 输出响应        response.SelfRsp.Builder builderRsp = response.SelfRsp.newBuilder();        builderRsp.setValue(fibs.get(n));        response.ResponseBody.Builder builderBody = response.ResponseBody.newBuilder();        builderBody.setRequestId(requestId);        builderBody.setType("fib_res");        response.ResponseBody build = builderBody.setReq(builderRsp.build()).build();        ctx.writeAndFlush(build);    }}