package com.sdp.self_rpc_done.zkRegistryAndDiscover;import com.sdp.self_rpc_done.apolloJoinUp.ApUtil;import com.sdp.self_rpc_done.apolloJoinUp.ZkConnect;import org.apache.zookeeper.*;import java.io.IOException;/*************************************************** * Copyright (C) didi_global                       * FileName:         ZkRegister                       * Author:           Sun Dongpo                    * Date:             2020/5/2 4:53 PM               * Description:                      * Tele:             15029155474                   * mail:             sundongpo_i@didiglobal.com    ************************************************** *///使用zk注册服务public class ZkRegister {    private ZooKeeper zk;    private ZkConnect zkConnect = ApUtil.zkConnect();    public static  void  Registry(byte[] service_attr) throws IOException, KeeperException, InterruptedException {        ZkRegister zkRegister = new ZkRegister();        zkRegister.getConnect();        zkRegister.doRegistry(service_attr);        zkRegister.durableWorking();    }    private  void durableWorking() throws InterruptedException {        //TODO    }    private  void doRegistry(byte[] service_attr) throws KeeperException, InterruptedException {        String zkPath = zk.create(                zkConnect.getServiceCreatePath_regist(),                service_attr,                ZooDefs.Ids.OPEN_ACL_UNSAFE,                CreateMode.EPHEMERAL_SEQUENTIAL);        System.out.println("已注册到 + ["+zkPath+"]");    }    private  void getConnect() throws IOException {        zk = new ZooKeeper(zkConnect.getConnectString_regist(), zkConnect.getSessionTimeOut_regist(), new Watcher() {            public void process(WatchedEvent event) {            }        });    }}